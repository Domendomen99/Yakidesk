{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's public profile information.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "The user's unique ID (matches auth.uid)." },
        "name": { "type": "string", "description": "The user's display name." },
        "email": { "type": "string", "description": "The user's email address.", "format": "email" },
        "avatarUrl": { "type": "string", "description": "URL of the user's avatar image.", "format": "uri" },
        "status": {
          "type": "string",
          "enum": ["pending", "approved", "rejected"],
          "description": "The approval status of the user account."
        },
        "roles": {
          "type": "array",
          "items": { "type": "string" },
          "description": "A list of roles assigned to the user (e.g., 'root')."
        },
        "fcmTokens": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "An array of Firebase Cloud Messaging tokens for sending push notifications."
        }
      },
      "required": ["id", "name", "email", "status"]
    },
    "Desk": {
      "title": "Desk",
      "type": "object",
      "description": "Represents a desk in the coworking space.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the desk." },
        "label": { "type": "string", "description": "The display label for the desk (e.g., 'Desk 1')." },
        "location": { "type": "string", "description": "The location of the desk (e.g., 'A1')." },
        "type": { "type": "string", "description": "The type of desk (e.g., 'Standard', 'Standing')." }
      },
      "required": ["id", "label", "location"]
    },
    "Booking": {
      "title": "Booking",
      "type": "object",
      "description": "Represents a booking of a desk by a user for a specific date and time.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the booking." },
        "userId": { "type": "string", "description": "The ID of the user making the booking." },
        "deskId": { "type": "string", "description": "The ID of the booked desk." },
        "date": { "type": "string", "description": "The date of the booking in YYYY-MM-DD format.", "format": "date" },
        "timeSlot": { "type": "string", "enum": ["morning", "afternoon", "full-day"], "description": "The time slot for the booking." }
      },
      "required": ["userId", "deskId", "date", "timeSlot"]
    }
  },
  "auth": {
    "providers": ["google.com"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": { "$ref": "#/backend/entities/UserProfile" },
          "description": "Stores user profiles. A user can manage their own profile, and other authenticated users can read it.",
          "params": [{ "name": "userId", "description": "The unique identifier for the user." }]
        }
      },
      {
        "path": "/desks/{deskId}",
        "definition": {
          "entityName": "Desk",
          "schema": { "$ref": "#/backend/entities/Desk" },
          "description": "Stores information about available desks. This data is read-only for clients.",
          "params": [{ "name": "deskId", "description": "The unique identifier for the desk." }]
        }
      },
      {
        "path": "/bookings/{bookingId}",
        "definition": {
          "entityName": "Booking",
          "schema": { "$ref": "#/backend/entities/Booking" },
          "description": "Stores all bookings. Authenticated users can see all bookings, but can only create/delete their own.",
          "params": [{ "name": "bookingId", "description": "The unique identifier for the booking." }]
        }
      }
    ],
    "reasoning": "This revised structure moves bookings to a top-level collection to simplify queries for all bookings on a given day. User profiles are now publicly readable by authenticated users to allow displaying user initials on bookings, but writable only by the owner. This supports the new feature requirement while maintaining a secure and scalable data model. Desk data remains globally readable and admin-managed."
  }
}
